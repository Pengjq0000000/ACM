## Link

https://atcoder.jp/contests/agc032/tasks

## Summary

| Task                | Score | Difficulty | Tag            |
| ------------------- | ----- | ---------- | -------------- |
| <a href="#A">A</a>  | 400   | 易         | 模拟           |
| <a href="#B">B</a>  | 700   | 易         | 构造           |
| <a href="#C">C</a>  | 800   | 中         | 构造、数据结构 |
| <a href="#D">D</a>  | 1000  |            |                |
| <a href ="#E">E</a> | 1200  |            |                |

## Details

### <a name="A">A  - Limited Insertion</a>

题意:一开始有一个空的数组$a$，然后对这个空数据进行了$N$次操作，第$i$次操作选择一个位置$j(j \leq i)$插入值为$j$的数。给你一个长度为$N$的数组$b$，问你是否存在一组操作可以得到数组$b$，如果存在输出任一组操作，不存在输出$-1$。

解法:由于每次都是在第$j$个位置插入$j$，可以倒着考虑，最后一次必定存在一个数$x$它的下标也是$x$，若不存在则是无解。把这个数抽掉后是一个规模缩小1的子问题，可以迭代求解下去。如果有多个位置符合要求，不失一般性考虑$i \leq j$，抽走$i$会使得$j$往前一位而使其变为不符合要求，若抽走$j$由于$i$在$j$的前面，不会被影响到，所以显然应该抽走最大的那个。

### <a name="B"> B -  Balanced Neighbors  </a>

题意：给你一个数$N (3 \leq N \leq 100)$，让你构造一张简单连通图，使得每个点的邻居编号之和都相同。

解法：如果是一张完全图，那么每个点的$sum_i = \sum_{j=1, j\ne i}^n = n*(n+1)/2-i$

注意到$1 + n == 2 + (n - 1) == 3 + (n - 2) == i + (n - i + 1) == n + 1$

因此如果对于第$i$个点去掉与$n - i + 1$的边则每个点的$sum_i=n*(n+1)/2-i-(n - i + 1) = n*(n+1)/2-(n + 1)$，为定值。

注意根据$N$的奇偶性来构造就可以了

### <a name="C"> C - Three Circuits </a>

题意：给你一张有$N(1 \leq N \leq 10^5)$个点$M(1 \leq M \leq 10^5)$条边的简单无向连通图，问是否可以将这张图划分为三个环（可以重复经过点但不能重复经过边），只输出是否即可。

解法：题目中的环可以重复经过点，其实就是欧拉回路。如果可以划分为三个环，那么可以将三个环拼接成一个大环，因此首先所有点的度数都要为偶数，即存在欧拉回路。先考虑如何判断一张存在欧拉回路的图能否划分为两个环，可以求出任一欧拉路径（即回路去掉最后回到开头的那一步），如果欧拉路径中有一个点出现了两次，假设下标为$i$和$j$，则说明$i$到$j$这个子区间是一个环。

判断能否划分为三个环可以考虑先删去一个环后判断剩下的图能否划分为两个环，先求出一个欧拉路径序列，假设长度为$len$，倍长后任一段长度为$len + 1$的都是原图的一个合法欧拉回路序列，我们可以在倍长后的序列上枚举删去的环，具体地，对于每个$i(1 \leq i \leq len)$找到离$a[i]$最近的下一个值为$a[i]$的位置$pos$，将$[i,pos]$这段形成的环删去，接下来只需查询$[pos+1,i+len]$这段区间内是否有出现至少两次的数，一种做法是看$\min_{j=pos+1}^{i+len}nextpos[a[j]] \leq i+len$是否成立，即区间中是否有一个数的下一个出现位置依旧在区间内，用支持查区间最小值的数据结构维护即可。